# Instru√ß√µes de Execu√ß√£o do Sistema de Drones (Desafio DTI)

Este guia detalha os passos necess√°rios para configurar e rodar a simula√ß√£o de log√≠stica de drones, incluindo o servidor de simula√ß√£o (Node.js) e o dashboard de controle (React).

## 1. Pr√©-requisitos

- **Node.js**: Vers√£o 18.x ou superior.
- **NPM**: Gerenciador de pacotes.

## 2. Estrutura do Projeto

O projeto √© dividido em duas camadas principais:

| Pasta | Conte√∫do | Porta de Execu√ß√£o |
|-------|----------|-------------------|
| `backend/` | Servidor Node.js, Express, GeoLib (Simula√ß√£o) | 3000 |
| `frontend/` | Dashboard React, Leaflet, TailwindCSS | 5173 (Vite) |

## 3. Configura√ß√£o Inicial e Instala√ß√£o

Abra o terminal na raiz do projeto (`desafio-drones-dti/`) e execute os comandos abaixo para instalar as depend√™ncias de cada camada:

### 3.1. Instalar depend√™ncias do Backend (Simulador):

```bash
cd backend
npm install
```
### 3.2. Instalar depend√™ncias do Backend (Simulador):

```bash
cd ../frontend
npm install
```
Volte para a raiz do projeto antes de prosseguir.

### 4. Inicializa√ß√£o do Banco de Dados
Nota: Este projeto utiliza persist√™ncia em mem√≥ria (Array em tempo de execu√ß√£o) para garantir a velocidade da simula√ß√£o em tempo real, portanto n√£o h√° necessidade de rodar migrations ou configurar bancos externos (SQLite/Postgres).

### 5. Execu√ß√£o do Projeto
Para que o sistema funcione corretamente, o Backend (C√©rebro) e o Frontend (Visualiza√ß√£o) devem estar rodando simultaneamente.
**Recomenda√ß√£o:** Use dois terminais separados na IDE de prefer√™ncia.


### 5.1. Terminal 1: Iniciar o Backend

1.  Navegue at√© a pasta `backend`:

<!-- end list -->

```bash
cd backend
```

2.  **Iniciar o Servidor:**

<!-- end list -->

```bash
npm run dev
```

**Resultado esperado**: Voc√™ ver√° a mensagem `üöÄ Servidor rodando em http://localhost:3000` e logs indicando que a simula√ß√£o dos drones come√ßou.

### 5.2. Terminal 2: Iniciar o Frontend

1.  Navegue para a pasta `frontend`:



```bash
cd frontend
```

2.  **Iniciar o Dashboard React:**



```bash
npm run dev
```

**Resultado esperado**: A aplica√ß√£o ser√° aberta no navegador (geralmente em `http://localhost:5173/`), exibindo o mapa de Belo Horizonte.

## 6\. Execu√ß√£o dos Testes Automatizados

O projeto inclui su√≠tes de testes unit√°rios para validar as regras de neg√≥cio cr√≠ticas (Capacidade e Prioridade).

### 6.1. Testes do Backend (Jest)

No terminal, navegue at√© a pasta `backend`:

```bash
cd backend
```

Rode o script de teste:

```bash
npm test
```

* **Resultado esperado:** O Jest ser√° executado e mostrar√° **PASS** para a su√≠te de testes de regras de neg√≥cio (`regras.test.js`).

## 7\. Roteiro de Teste (Valida√ß√£o dos Requisitos)

Para validar a otimiza√ß√£o log√≠stica e a simula√ß√£o, siga este roteiro:

### 7.1. Valida√ß√£o da Otimiza√ß√£o 1:N (Combo de Entregas)

* **Prepara√ß√£o:** Certifique-se de que o backend est√° rodando.
* **A√ß√£o:** Cadastre rapidamente 3 pedidos pequenos (ex: 2kg cada) no formul√°rio `/cadastrar`.
* **Observa√ß√£o:** No Dashboard, os pedidos ficar√£o como "Aguardando" na fila enquanto o drone estiver ocupado ou carregando.
* **Resultado Esperado:** Assim que um drone for alocado, ele pegar√° **todos os 3 pedidos de uma vez** (desde que a soma seja \< 12kg) e iniciar√° uma rota √∫nica. O terminal do backend exibir√°: `üöÄ Drone ALOCADO! Viagem com 3 pacotes`.

### 7.2. Valida√ß√£o da Bateria e Mapa

* **A√ß√£o:** Cadastre um pedido para um local distante (ex: Betim ou Nova Lima). Voc√™ pode usar o CEP `32655-505` (Betim).
* **Observa√ß√£o:** Acompanhe a tabela de "Status dos Drones" no Dashboard.
* **Resultado Esperado:** 
* 1. A barra de bateria deve diminuir gradualmente (de verde para amarelo/vermelho) conforme o drone se desloca no mapa.
* 2. O √≠cone do drone no mapa deve se mover em dire√ß√£o √† coordenada de destino.

### 7.3. Hist√≥rico e Conclus√£o

* **A√ß√£o:** Aguarde o drone chegar ao destino e retornar.
* **Resultado Esperado:**  
* 1. O pedido some da tabela "Fila de Pedidos". 
* 2. O pedido aparece na tabela "Hist√≥rico de Pedidos Conclu√≠dos" com o hor√°rio exato da entrega.
* 3. O drone volta para a base e o status muda para `RETORNANDO` e depois `IDLE`.
